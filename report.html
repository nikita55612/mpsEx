<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" type="image/png" href="./icons/icon24.png">
	<link rel="stylesheet" href="base.css">
	<title>Отчет</title>
	<style>
		img {
			user-select: none;
		}

		.dd_content {
			background: #f2f2f2;
			border: 3px double #121212;
			padding: 6px;
			position: absolute;
			top: 14px;
			z-index: 998;
		}

		.dd_content ul {
			margin: 0;
			list-style-type: none;
		}

		.dd_content li {
			display: flex;
			align-items: center;
			gap: 6px;
			height: 22px;
		}

		#imageDisplay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.7);
			z-index: 999;
			display: none;
		}

		#imageDisplay.visible {
			display: flex;
			justify-content: center;
			align-items: center;
		}

		#imageDisplayImg {
			max-height: 80vh;
			object-fit: contain;
			border-radius: 4px;
		}
	</style>
</head>

<body>
	<div style="display:flex;gap:14px;align-items:center;">
		<img src="./icons/icon128.png" id="titelLogo" alt="titelLogo" style="width:48px;padding-right:8px;">
		<h1>Отчет</h1>
		<b id="reportTitelId"></b>
	</div>
	<hr>
	<table id="reportInfo">
		<tr>
			<th>Query</th>
			<td id="rQuery" style="max-width:600px;word-wrap:break-word;"></td>
		</tr>
		<tr>
			<th>Limit</th>
			<td id="rLimit"></td>
		</tr>
		<tr>
			<th>Marketplace</th>
			<td id="rMP"></td>
		</tr>
		<tr>
			<th>Total items</th>
			<td id="rTotalItems"></td>
		</tr>
		<tr>
			<th>Elapsed</th>
			<td id="rElapsed"></td>
		</tr>
		<tr>
			<th>Time</th>
			<td id="rTime"></td>
		</tr>
		<tr>
			<th>Error</th>
			<td id="rError" style="color:red;"></td>
		</tr>
	</table>
	<br>
	<button class="bbtn" id="tryAgainBtn" style="margin-bottom:8px;" hidden>Повторить попытку</button>
	<div id="actionBlock" style="display:none;">
		<button class="bbtn" id="updateBtn">Обновить</button>
		<span id="loadUpdateStatus" style="color:green;margin-left:6px" hidden>Загрузка...</span>
		<br>
		<hr>
		<div style="display:flex;gap:12px;align-items:center;">
			<a href="#bottomReportTable" style="font-size:24px;">&#8615;</a>
			<div>
				<input type="checkbox" id="headersCheckbox" name="" checked />
				<label for="headersCheckbox">Заголовки</label>
			</div>
			<div class="dd_menu" style="position:relative;">
				<b id="tableExportDataDropBtn" style="cursor:pointer;color:blue;text-decoration:underline;">Данные↓</b>
				<ul id="tableExportDataOptions" class="dd_content" hidden>
					<li>
						<input type="checkbox" id="name_cb" value="name" name="" checked />
						<label for="name_cb">name</label>
					</li>
					<li>
						<input type="checkbox" id="price_cb" value="price" name="" checked />
						<label for="price_cb">price</label>
					</li>
					<li>
						<input type="checkbox" id="rating_cb" value="rating" name="" checked />
						<label for="rating_cb">rating</label>
					</li>
					<li>
						<input type="checkbox" id="reviews_cb" value="reviews" name="" checked />
						<label for="reviews_cb">reviews</label>
					</li>
					<li>
						<input type="checkbox" id="url_cb" value="url" name="" checked />
						<label for="url_cb">url</label>
					</li>
					<li>
						<input type="checkbox" id="image_cb" value="image" name="" checked />
						<label for="image_cb">image</label>
					</li>
				</ul>
			</div>
			<button class="bbtn" id="copyCsvBtn">Копировать CSV</button>
			<button class="bbtn" id="exportCsvBtn">Экспорт CSV</button>
		</div>
	</div>
	<div id="tableOfChangesBlock" hidden>
		<div style="display:flex;gap:12px;align-items:center;">
			<h2>Таблица изменений</h2>
			<a href="#bottomTableOfChanges" style="font-size:24px;">&#8615;</a>
			<button class="bbtn" id="clearTableOfChanges">Очистить</button>
			<b id="changesCountTxt"></b>
			<b id="changesDiffCountTxt" style="color:green;"></b>

		</div>
		<table id="tableOfChanges">
		</table>
		<div id="bottomTableOfChanges"></div>
		<a href="#actionBlock" style="font-size:24px;">&#8613;</a>
		<br>
	</div>
	<br>
	<table id="reportTable" hidden>
	</table>
	<div id="bottomReportTable"></div>
	<div id="imageDisplay">
		<img id="imageDisplayImg" src="" alt="">
	</div>
	<a href="#actionBlock" style="font-size:24px;">&#8613;</a>
	<script src="report.js"></script>
</body>

</html>
